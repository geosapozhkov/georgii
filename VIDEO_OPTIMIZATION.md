# Оптимизация видео для быстрой загрузки

## Программные оптимизации (уже реализованы)
- ✅ Агрессивная предзагрузка видео
- ✅ Использование предзагруженных видео напрямую
- ✅ Предзагрузка следующего видео заранее

## Оптимизация самих видео файлов

### 1. Сжатие видео с помощью FFmpeg

Установите FFmpeg: https://ffmpeg.org/download.html

#### Для мобильных устройств (рекомендуется):
```bash
ffmpeg -i input.mp4 -c:v libx264 -preset slow -crf 28 -c:a aac -b:a 128k -movflags +faststart -vf "scale=1280:-1" output.mp4
```

#### Для десктопа (высокое качество):
```bash
ffmpeg -i input.mp4 -c:v libx264 -preset slow -crf 23 -c:a aac -b:a 128k -movflags +faststart output.mp4
```

**Параметры:**
- `-crf 28` - качество (18-28, чем больше - тем меньше размер)
- `-preset slow` - баланс между скоростью и размером
- `-movflags +faststart` - оптимизация для веб (начинает воспроизведение до полной загрузки)
- `-vf "scale=1280:-1"` - уменьшение разрешения для мобильных

### 2. Онлайн инструменты
- **HandBrake**: https://handbrake.fr/ (бесплатно, с GUI)
- **CloudConvert**: https://cloudconvert.com/ (онлайн)
- **Clideo**: https://clideo.com/compress-video (онлайн)

### 3. Рекомендации по размерам
- **Мобильные**: 720p-1080p, битрейт 1-2 Mbps
- **Десктоп**: 1080p-1440p, битрейт 2-4 Mbps
- **Длительность**: для HomeContent рекомендуется 5-15 секунд

### 4. Формат
- Используйте **MP4 с H.264** кодеком (лучшая совместимость)
- Аудио: **AAC** 128kbps (или без звука, если не нужен)

### 5. Быстрая проверка размера
После оптимизации файлы должны быть:
- **Мобильные**: 1-5 MB для 10-секундного видео
- **Десктоп**: 2-10 MB для 10-секундного видео

### Пример скрипта для пакетной обработки (Windows):
```batch
@echo off
for %%f in (*.mp4) do (
    ffmpeg -i "%%f" -c:v libx264 -preset slow -crf 28 -c:a aac -b:a 128k -movflags +faststart -vf "scale=1280:-1" "optimized_%%f"
)
```

### Пример скрипта для пакетной обработки (Mac/Linux):
```bash
#!/bin/bash
for file in *.mp4; do
    ffmpeg -i "$file" -c:v libx264 -preset slow -crf 28 -c:a aac -b:a 128k -movflags +faststart -vf "scale=1280:-1" "optimized_$file"
done
```

## Проверка результата
После оптимизации проверьте:
1. Размер файла уменьшился минимум в 2-3 раза
2. Видео воспроизводится без задержек
3. Качество приемлемое для ваших целей

